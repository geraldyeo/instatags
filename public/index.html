<!DOCTYPE html>
<!--[if lt IE 7 ]>
<html lang="en" class="ie6"> <![endif]-->
<!--[if IE 7 ]>
<html lang="en" class="ie7"> <![endif]-->
<!--[if IE 8 ]>
<html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9 ]>
<html lang="en" class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="en"> <!--<![endif]-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Instawed</title>
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">

    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="js/sliderjs/slider.min.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="instagram">Instawed</div>
<div class="photo"></div>
</body>
<script src="/socket.io/socket.io.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="js/sliderjs/slider.min.js"></script>
<script>
    (function ($) {
        var slider = new Slider($('.photo'));
        slider.setSize(612, 612)
                .setTheme('no-control')
                .setTransitionFunction(SliderTransitionFunctions.squares);

        //var socket = io.connect('http://localhost:8080');
        var socket = io.connect('http://instawed.jit.su/');
        socket.on('photo', function (raw) {
            console.log(raw);
            var medias = JSON.parse(raw);
            var photos = [];

            $.map(medias, function (media, i) {
                photos.push({
                                "link":media.link,
                                "src" :media.images.standard_resolution.url,
                                "name":media.user.full_name
                            });
            });

            console.log('updated...');
            slider.setPhotos(photos);
        });
    })(jQuery);

</script>
</html>